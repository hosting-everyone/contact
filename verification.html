<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OAuth Redirect</title>
</head>
<body>
    <script>
        // Haal de autorisatiecode op uit de querystring
        const params = new URLSearchParams(window.location.search);
        const code = params.get('code');

        // Controleer of er een autorisatiecode is
        if (code) {
            // Voeg hier je Discord-client-ID toe
            const clientId = '1240374594242609293';

            // Voeg hier je Discord redirect URI toe
            const redirectUri = 'https://ricardo-s-website.netlify.app/';

            // Bouw de URL om de autorisatiecode naar Discord te sturen voor toegangstoken
            const tokenUrl = `https://discord.com/api/oauth2/token?client_id=${clientId}&client_secret=${clientSecret}&grant_type=authorization_code&code=${code}&redirect_uri=${encodeURIComponent(redirectUri)}&scope=identify%20guilds`;

            // Maak een POST-verzoek om het toegangstoken te krijgen
            fetch(tokenUrl, {
                method: 'POST'
            })
            .then(response => response.json())
            .then(data => {
                // Controleer hier of de gebruiker in je Discord-server zit
                // Als de gebruiker in je server zit, stuur ze door naar authorized.html
                // Anders toon een foutmelding
                // Hier voer je de controle uit of de gebruiker in je Discord-server zit
                // Als de gebruiker in je server zit, gebruik dan window.location.href om ze door te sturen naar authorized.html
                // Als de gebruiker niet in je server zit, toon dan een foutmelding
            })
            .catch(error => {
                console.error('Fout bij het ophalen van het toegangstoken:', error);
                // Toon een foutmelding aan de gebruiker
            });
        } else {
            // Toon een foutmelding aan de gebruiker omdat er geen autorisatiecode is
        }
    </script>
</body>
</html>
